<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Log4cplus-trunk by wilx</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Log4cplus-trunk</h1>
        <p></p>

        <p class="view"><a href="https://github.com/wilx/log4cplus-trunk">View the Project on GitHub <small>wilx/log4cplus-trunk</small></a></p>


        <ul>
          <li><a href="https://github.com/wilx/log4cplus-trunk/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/wilx/log4cplus-trunk/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/wilx/log4cplus-trunk">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a name="short-description" class="anchor" href="#short-description"><span class="octicon octicon-link"></span></a>Short Description</h1>

<p>log4cplus is a simple to use C++ logging API providing thread-safe,
flexible, and arbitrarily granular control over log management and
configuration.  It is modeled after the Java log4j API.</p>

<h1>
<a name="latest-project-information" class="anchor" href="#latest-project-information"><span class="octicon octicon-link"></span></a>Latest Project Information</h1>

<p>The latest up-to-date information for this project can be found at
<a href="http://log4cplus.sourceforge.net">log4cplus.sourceforge.net</a>.  Please
submit bugs, patches, feature requests, etc., there.</p>

<h1>
<a name="tested-on-the-following-platforms" class="anchor" href="#tested-on-the-following-platforms"><span class="octicon octicon-link"></span></a>Tested on the following platforms</h1>

<ul>
<li>Linux/AMD64 with GCC 4.7.2 (Ubuntu/Linaro 4.7.2-2ubuntu1)</li>
<li>Linux/AMD64 with Sun C++ 5.12 Linux_i386 2011/11/16</li>
<li>Linux/AMD64 with Clang version 3.0-6ubuntu3 (tags/RELEASE_30/final)
(based on LLVM 3.0)</li>
<li>Linux/AMD64 with Intel(R) C++ Intel(R) 64 Compiler XE for
applications running on Intel(R) 64, Version 12.1 Build 20120410</li>
<li>FreeBSD/AMD64 with GCC 3.4.6, 4.2.1 and 4.3.3</li>
<li>Windows 7 with MS Visual Studio 2010 and 2012</li>
<li>OpenSolaris 5.11/i386 with Sun C++ 5.10 SunOS_i386 128229-02
2009/09/21, with <code>-library=stlport4</code>
</li>
<li>Solaris 5.10/Sparc with Sun C++ 5.8 2005/10/13, with
<code>-library=stlport4</code> and with <code>-library=Cstd</code>.</li>
<li>Solaris 5.10/Sparc with GCC 3.4.3 (csl-sol210-3_4-branch+sol_rpath)</li>
<li>NetBSD 6.0/AMD64 with GCC 4.5.3 (NetBSD nb2 20110806)</li>
<li>OpenBSD 5.2/AMD64 with GCC 4.2.1 20070719</li>
<li>MacOS X 10.8 with GCC 4.2.1 (Apple Inc. build 5664)</li>
</ul><h1>
<a name="configure-script-options" class="anchor" href="#configure-script-options"><span class="octicon octicon-link"></span></a>Configure script options</h1>

<h2>
<a name="--enable-debugging" class="anchor" href="#--enable-debugging"><span class="octicon octicon-link"></span></a><code>--enable-debugging</code>
</h2>

<p>This option is disabled by default.  This option mainly affects GCC
builds but it also has some limitted effect on non-GCC builds.  It
turns on debugging information generation, undefines <code>NDEBUG</code> symbol,
adds <code>-fkeep-inline-functions</code> and <code>-fstack-check</code> (GCC).</p>

<h2>
<a name="--enable-warnings" class="anchor" href="#--enable-warnings"><span class="octicon octicon-link"></span></a><code>--enable-warnings</code>
</h2>

<p>This option is enabled by default.  It adds platform / compiler
dependent warning options to compiler command line.</p>

<h2>
<a name="--enable-so-version" class="anchor" href="#--enable-so-version"><span class="octicon octicon-link"></span></a><code>--enable-so-version</code>
</h2>

<p>This option is enabled by default.  It enables SO version decoration
on resulting library file, e.g., the <code>.2.0.0</code> in
<code>liblog4cplus-1.2.so.2.0.0</code>.</p>

<h2>
<a name="--enable-release-version" class="anchor" href="#--enable-release-version"><span class="octicon octicon-link"></span></a><code>--enable-release-version</code>
</h2>

<p>This option is enabled by default.  It enables release version
decoration on the resulting library file, e.g., the <code>-1.2</code> in
<code>liblog4cplus-1.2.so.2.0.0</code>.</p>

<h2>
<a name="--enable-profiling" class="anchor" href="#--enable-profiling"><span class="octicon octicon-link"></span></a><code>--enable-profiling</code>
</h2>

<p>This option is disabled by default.  This option adds profiling
information generation compiler option <code>-pg</code> to GCC and Sun CC /
Solaris Studio builds.</p>

<h2>
<a name="--enable-threads" class="anchor" href="#--enable-threads"><span class="octicon octicon-link"></span></a><code>--enable-threads</code>
</h2>

<p>This option is enabled by default.  It turns on detection of necessary
compiler and linker flags that enable POSIX threading support.</p>

<p>While this detection usually works well, some platforms still need
help with configuration by supplying additional flags to the configure
script.  One of the know deficiencies is Solaris Studio on Linux.  See
one of the later note for details.</p>

<h2>
<a name="--with-working-locale" class="anchor" href="#--with-working-locale"><span class="octicon octicon-link"></span></a><code>--with-working-locale</code>
</h2>

<p>This is one of three locale and <code>wchar_t</code> &lt;-&gt; <code>char</code> conversion
related options.  It is disabled by default.</p>

<p>It is know to work well with GCC on Linux.  Other platforms generally
have lesser locale support in their implementations of the C++
standard library.  It is known not to work well on any *BSD.</p>

<p>See also docs/unicode.txt.</p>

<h2>
<a name="--with-working-c-locale" class="anchor" href="#--with-working-c-locale"><span class="octicon octicon-link"></span></a><code>--with-working-c-locale</code>
</h2>

<p>This is second of <code>wchar_t</code> &lt;-&gt; <code>char</code> conversion related options.  It
is disabled by default.</p>

<p>It is known to work well on most *NIX platforms, including recent Cygwin.</p>

<h2>
<a name="--with-iconv" class="anchor" href="#--with-iconv"><span class="octicon octicon-link"></span></a><code>--with-iconv</code>
</h2>

<p>This is third of <code>wchar_t</code> &lt;-&gt; <code>char</code> conversion related options.  It is
disabled by default.</p>

<p>The conversion using iconv() function always uses <code>"UTF-8"</code> and
<code>"WCHAR_T"</code> as source/target encodings.  It is known to work well on
platforms with GNU iconv.  Different implementations of <code>iconv()</code>
might not support <code>"WCHAR_T"</code> encoding selector.</p>

<p>Either system provided <code>iconv()</code> or library provided <code>libiconv()</code> are
detected and accepted.  Also both SUSv3 and GNU <code>iconv()</code> function
signatures are accepted.</p>

<h2>
<a name="--with-qt" class="anchor" href="#--with-qt"><span class="octicon octicon-link"></span></a><code>--with-qt</code>
</h2>

<p>This option is disabled by default.  It enables compilation of a
separate shared library (liblog4cplusqt4debugappender) that implements
<code>Qt4DebugAppender</code>.  It requires Qt4 and pkg-config to be installed.</p>

<h1>
<a name="notes" class="anchor" href="#notes"><span class="octicon octicon-link"></span></a>Notes</h1>

<h2>
<a name="cygwinmingw" class="anchor" href="#cygwinmingw"><span class="octicon octicon-link"></span></a>Cygwin/MinGW</h2>

<p>Some version of GCC (3.4.x and probably some of 4.x series too) on
Windows (both Mingw and Cygwin) produces lots of warnings of the form:</p>

<p><code>warning: inline function 'void foo()' is declared as dllimport:
attribute ignored</code></p>

<p>This can be worked around by adding <code>-Wno-attributes</code> option to GCC
command.  Unfortunatelly, not all affected version of GCC have this
option.</p>

<h2>
<a name="windows-and-tls" class="anchor" href="#windows-and-tls"><span class="octicon octicon-link"></span></a>Windows and TLS</h2>

<p>log4cplus uses thread-local storage (TLS) for NDC, MDC and to optimize
use of some temporary objects.  On Windows there are two ways to get
TLS:</p>

<p>(1) using <code>TlsAlloc()</code>, etc., functions
(2) using <code>__declspec(thread)</code></p>

<p>While method (2) generates faster code, it has some limitations prior
to Windows Vista.  If log4cplus.dll is loaded at run time using
<code>LoadLibrary()</code> (or as a dependency of such loaded library), then
accessing <code>__declspec(thread)</code> variables can cause general protection
fault (GPF) errors.  This is because Windows prior to Windows Vista do
not extend the TLS for libraries loaded at run time using
LoadLibrary().  To allow using the best available method, log4cplus
enables the method (2) by checking <code>_WIN32_WINNT &gt;= 0x0600</code> condition,
when compiling log4cplus targetted to Windows Vista or later.</p>

<h2>
<a name="threads-and-signals" class="anchor" href="#threads-and-signals"><span class="octicon octicon-link"></span></a>Threads and signals</h2>

<p>log4cplus is not safe to be used from async signals' handlers.  This
is a property of most threaded programmes in general.  If you are
going to use log4cplus in threaded application and if you want to use
log4cplus from signal handlers then your only option is to block
signals in all threads but one that will handle all signals.  On POSIX
platforms, this is possible using the <code>sigwait()</code> call.  log4cplus
enables this approach by blocking all signals in any threads created
through its threads helpers.</p>

<h2>
<a name="ibms-xl-cc-compiler" class="anchor" href="#ibms-xl-cc-compiler"><span class="octicon octicon-link"></span></a>IBM's XL C/C++ compiler</h2>

<p>IBM's XL C/C++ compiler executable has <a href="http://pic.dhe.ibm.com/infocenter/comphelp/v121v141/index.jsp?topic=%2Fcom.ibm.xlcpp121.aix.doc%2Fcompiler_ref%2Ftucmpinv.html">many variants</a>.  To compile
log4cplus with threading support specify one of the compiler variants
that support threading using the <code>CXX</code> variable on configure script
command line.  E.g.:</p>

<pre><code>$ ../configure --enable-threads CXX=xlC_r
</code></pre>

<h2>
<a name="aix-reentrancy-problem" class="anchor" href="#aix-reentrancy-problem"><span class="octicon octicon-link"></span></a>AIX reentrancy problem</h2>

<p>There appears to be a reentracy problem with AIX 5.3 and xlC 8 which
can result into a deadlock condition in some curcumstances.  It is
unknown whether the problem manifests with other versions of either
the OS or the compiler, too.  The problem was initially reported in a
bug report <a href="http://sourceforge.net/p/log4cplus/bugs/103/">#103</a>.</p>

<p>The core of the problem is that IBM's/xlC's standard C++ IOStreams
implementation uses global non recursive lock to protect some of its
state.  The application in the bug report was trying to do logging
using log4cplus from inside <code>overflow()</code> member function of a class
derived from <code>std::streambuf</code> class.  log4cplus itself uses
<code>std::ostringstream</code>.  This resulted into an attempt to recursivly
lock the global non recursive lock and a deadlock.</p>

<h2>
<a name="solaris--sunos" class="anchor" href="#solaris--sunos"><span class="octicon octicon-link"></span></a>Solaris / SunOS</h2>

<p>Some older version of this operating system might have problems
linking log4cplus due to <a href="https://groups.google.com/d/msg/comp.unix.solaris/AAMqkK0QZ6U/zlkVKA1L_QcJ">missing <code>__tls_get_addr</code></a> in their
unpatched state.</p>

<h2>
<a name="solaris-studio" class="anchor" href="#solaris-studio"><span class="octicon octicon-link"></span></a>Solaris Studio</h2>

<p>Solaris Studio compilers' default standard C++ library is very
non-standard.  It seems that it is not conforming enough in, e.g., Sun
C++ 5.12 Linux_i386 2011/11/16 (missing <code>std::time_t</code>, etc.), but it
works well enough on Solaris with Sun C++ 5.8 2005/10/13.  Thus
log4cplus adds <code>-library=stlport4</code> to the <code>CXXFLAGS</code> environment
variable, unless a switch matching <code>-library=(stlport4|stdcxx4|Cstd)</code>
is already present there.  If you want to override the default
supplied by log4cplus, just set it into <code>CXXFLAGS</code> on configure script
command line.</p>

<p>Solaris Studio supports the <code>__func__</code> symbol which can be used by
log4cplus to record function name in logged events.  To enable this
feature, add <code>-features=extensions</code> switch to <code>CXXFLAGS</code> for configure
script.  Subsequently, you will have to add this switch to your
application's build flags as well.</p>

<h2>
<a name="solaris-studio-on-gnulinux" class="anchor" href="#solaris-studio-on-gnulinux"><span class="octicon octicon-link"></span></a>Solaris Studio on GNU/Linux</h2>

<p>The autotools and our configure.ac combo does not handle Solaris
Studio compiler on Linux well enough and needs a little help with
configuration of POSIX threads:</p>

<pre><code>$ COMMON_FLAGS="-L/lib/x86_64-linux-gnu/ \
-L/usr/lib/x86_64-linux-gnu/ -mt=yes -O"

$ ../configure --enable-threads=yes \
CC=/opt/solarisstudio12.3/bin/cc \
CXX=/opt/solarisstudio12.3/bin/CC \
CFLAGS="$COMMON_FLAGS" \
CXXFLAGS="$COMMON_FLAGS" \
LDFLAGS="-lpthread"
</code></pre>

<h2>
<a name="qt4--win32--msvc" class="anchor" href="#qt4--win32--msvc"><span class="octicon octicon-link"></span></a>Qt4 / Win32 / MSVC</h2>

<p>In order to use log4cplus in Qt4 programs it is necessary to set
following option: <code>Treat WChar_t As Built in Type: No (/Zc:wchar_t-)</code></p>

<p>Set this option for log4cplus project and <code>Qt4DebugAppender</code> project
in MS Visual Studio.  Remember to use Unicode versions of log4cplus
libraries with Qt.  It is also necessary to make clear distinction
between debug and release builds of Qt project and log4cplus.  Do not
use log4cplus release library with debug version of Qt program or vice
versa.</p>

<p>For registering Qt4DebugAppender library at run-time call this
function: <code>log4cplus::Qt4DebugAppender::registerAppender()</code></p>

<p>Add these lines to qmake project file for using log4cplus and
<code>Qt4DebugAppender</code>:</p>

<pre><code>INCLUDEPATH += C:\log4cplus\include
win32 {
    CONFIG(debug, debug|release) {
        LIBS += -LC:\log4cplus\msvc10\Win32\bin.Debug_Unicode -llog4cplusUD
        LIBS += -LC:\log4cplus\msvc10\Win32\bin.Debug_Unicode -llog4cplus-Qt4DebugAppender
    } else {
        LIBS += -LC:\log4cplus\msvc10\Win32\bin.Release_Unicode -llog4cplusU
        LIBS += -LC:\log4cplus\msvc10\Win32\bin.Release_Unicode -llog4cplus-Qt4DebugAppender
    }
}
</code></pre>

<h2>
<a name="qt--gcc-" class="anchor" href="#qt--gcc-"><span class="octicon octicon-link"></span></a>Qt / GCC </h2>

<p>You might encounter the following error during compilation with
<code>--with-qt</code> option:</p>

<p><code>qglobal.h:943: error: ISO C++ does not support 'long long'</code></p>

<p>This is caused by <code>-pedantic</code> option that log4cplus adds to <code>CXXFLAGS</code>
when compiling with GCC.  To work around this issue, add
<code>-Wno-long-long</code> GCC option to <code>CXXFLAGS</code>.</p>

<h2>
<a name="log4cplus__fmt-and-unicode" class="anchor" href="#log4cplus__fmt-and-unicode"><span class="octicon octicon-link"></span></a><code>LOG4CPLUS_*_FMT()</code> and UNICODE</h2>

<p>Beware, the <code>%s</code> specifier does not work the same way on *NIX as it
does on Windows with Visual Studio.  With Visual Studio the <code>%s</code>
specifier changes its meaning conveniently by printing <code>wchar_t</code>
string when used with <code>wprintf()</code> and <code>char</code> strings when used with
<code>printf()</code>.  On the other hand, *NIX keeps the meaning of printing
<code>char</code> strings when used with both <code>wprintf()</code> and <code>printf()</code>.  It is
necessary to use <code>%ls</code> (C99) specifier or <code>%S</code> (SUSv2) specifier to
print <code>wchar_t</code> strings on *NIX.</p>

<p>The common ground for both platforms appears to be use of <code>%ls</code> and
<code>wchar_t</code> string to print strings with unmodified formatting string
argument on both *NIX and Windows.  The conversion of <code>wchar_t</code> back
to <code>char</code> then depends on C locale.</p>

<h2>
<a name="c11-support" class="anchor" href="#c11-support"><span class="octicon octicon-link"></span></a>C++11 support</h2>

<p>log4cplus contains small amount of code that uses C++11 (ISO/IEC
14882:2011 standard) language features.  C++11 features are used only
if C++11 support is detected during compile time.  Compiling log4cplus
with C++11 compiler and standard library and using it with C++03
(ISO/IEC 14882:2003 standard) application is not supported.</p>

<h2>
<a name="unsupported-compilers" class="anchor" href="#unsupported-compilers"><span class="octicon octicon-link"></span></a>Unsupported compilers</h2>

<p>log4cplus does not support too old or broken C++ compilers:</p>

<ul>
<li>Visual C++ prior to 7.1</li>
<li>GCC prior to 3.2</li>
<li>Older versions of Borland/CodeGear/Embarcadero C++ compilers</li>
</ul><h2>
<a name="unsupported-platforms" class="anchor" href="#unsupported-platforms"><span class="octicon octicon-link"></span></a>Unsupported platforms</h2>

<p>log4cplus requires some minimal set of C and/or C++ library
functions. Some systems/platforms fail to provide these functions and
thus log4cplus cannot be supported there:</p>

<ul>
<li>Windows CE - missing implementations of <code>&lt;time.h&gt;</code> functions</li>
</ul><h1>
<a name="license" class="anchor" href="#license"><span class="octicon octicon-link"></span></a>License</h1>

<p>This library is licensed under the Apache Public License 2.0 and two
clause BSD license.  Please read the included LICENSE file for
details.</p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/wilx">wilx</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>